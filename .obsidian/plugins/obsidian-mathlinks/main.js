/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);
var __async = (__this, __arguments, generator) => {
  return new Promise((resolve, reject) => {
    var fulfilled = (value) => {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    };
    var rejected = (value) => {
      try {
        step(generator.throw(value));
      } catch (e) {
        reject(e);
      }
    };
    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);
    step((generator = generator.apply(__this, __arguments)).next());
  });
};

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => MathLinks
});
module.exports = __toCommonJS(main_exports);
var import_obsidian2 = require("obsidian");

// src/settings.ts
var import_obsidian = require("obsidian");
var MathLinksSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    return __async(this, null, function* () {
      const { containerEl } = this;
      containerEl.empty();
      containerEl.createEl("h2", { text: "MathLinks Settings" });
      new import_obsidian.Setting(containerEl).setName("Add a new template").setDesc(createFragment((e) => {
        e.createSpan({
          text: "Automatically generate a mathLink with templates. Use "
        });
        e.createEl("code", {
          text: "mathLink: auto"
        });
        e.createSpan({
          text: " to use templates in a file."
        });
      })).addButton((button) => {
        let b = button.setTooltip("Add").setIcon("plus").onClick(() => __async(this, null, function* () {
          let modal = new AddTemplatesModal(this.app);
          modal.onClose = () => __async(this, null, function* () {
            if (modal.saved) {
              const template = {
                title: modal.title,
                replaced: modal.replaced,
                replacement: modal.replacement,
                globalMatch: modal.globalMatch,
                sensitive: modal.sensitive,
                word: modal.word
              };
              this.plugin.settings.templates.push(template);
              yield this.plugin.saveSettings();
              new import_obsidian.Notice("MathLinks: Template added.");
            }
          });
          modal.open();
          this.display();
        }));
        return b;
      });
      let templateTitleToEdit;
      new import_obsidian.Setting(containerEl).setName("Edit template").setDesc("Select a template to edit it.").addDropdown((dropdown) => {
        dropdown.addOption("__select", "Select");
        for (let i = 0; i < this.plugin.settings.templates.length; i++) {
          dropdown.addOption(this.plugin.settings.templates[i].title, this.plugin.settings.templates[i].title);
        }
        dropdown.onChange((current) => __async(this, null, function* () {
          if (current != "__select")
            templateTitleToEdit = current;
          else
            templateTitleToEdit = null;
        }));
      }).addExtraButton((button) => {
        let b = button.setTooltip("Edit").setIcon("edit").onClick(() => __async(this, null, function* () {
          if (templateTitleToEdit) {
            let originalTemplates = JSON.parse(JSON.stringify(this.plugin.settings.templates));
            let modal = new EditTemplatesModal(this.app, templateTitleToEdit, this.plugin.settings.templates);
            modal.onClose = () => __async(this, null, function* () {
              if (modal.saved) {
                yield this.plugin.saveSettings();
                new import_obsidian.Notice("MathLinks: Template saved.");
              } else {
                this.plugin.settings.templates = originalTemplates;
              }
            });
            modal.open();
            this.display();
          } else {
            new import_obsidian.Notice("MathLinks: Please select a template.");
          }
        }));
        return b;
      });
      let templateTitleToDelete;
      new import_obsidian.Setting(containerEl).setName("Delete a template").setDesc("Select a template to delete it.").addDropdown((dropdown) => {
        dropdown.addOption("__select", "Select");
        for (let i = 0; i < this.plugin.settings.templates.length; i++) {
          dropdown.addOption(this.plugin.settings.templates[i].title, this.plugin.settings.templates[i].title);
        }
        dropdown.onChange((current) => __async(this, null, function* () {
          if (current != "__select")
            templateTitleToDelete = current;
          else
            templateTitleToDelete = null;
        }));
      }).addExtraButton((button) => {
        let b = button.setTooltip("Delete").setIcon("trash").onClick(() => __async(this, null, function* () {
          if (templateTitleToDelete) {
            let modal = new DeleteTemplatesModal(this.app, templateTitleToDelete);
            modal.onClose = () => __async(this, null, function* () {
              if (modal.proceed) {
                for (let i = 0; i < this.plugin.settings.templates.length; i++) {
                  if (this.plugin.settings.templates[i].title === templateTitleToDelete) {
                    this.plugin.settings.templates.splice(i, 1);
                    yield this.plugin.saveSettings();
                    new import_obsidian.Notice(`MathLinks: Template '${templateTitleToDelete}' deleted.`);
                    break;
                  }
                }
              }
            });
            modal.open();
            this.display();
          } else {
            new import_obsidian.Notice("MathLinks: Please select a template.");
          }
        }));
        return b;
      });
    });
  }
};
var AddTemplatesModal = class extends import_obsidian.Modal {
  constructor(app) {
    super(app);
    this.saved = false;
    this.title = "";
    this.replaced = "";
    this.replacement = "";
    this.globalMatch = true;
    this.sensitive = true;
    this.word = true;
  }
  onOpen() {
    const { contentEl } = this;
    let titleText;
    new import_obsidian.Setting(contentEl).setName("Title").setDesc("Name of the template.").addText((text) => {
      titleText = text;
      titleText.setValue(this.title).onChange((current) => {
        this.title = current;
      });
    });
    let replacedText;
    new import_obsidian.Setting(contentEl).setName("Replace all ...").setDesc("Strings to be matched and replaced.").addText((text) => {
      replacedText = text;
      replacedText.setValue(this.replaced).onChange((current) => {
        this.replaced = current;
      });
    });
    let replacementText;
    new import_obsidian.Setting(contentEl).setName("... with").setDesc("String to replace all matches. Do not escape backslashes.").addText((text) => {
      replacementText = text;
      replacementText.setValue(this.replacement).onChange((current) => {
        this.replacement = current;
      });
    });
    new import_obsidian.Setting(contentEl).setName("Global").setDesc("Match all instances (instead of just the first).").addToggle((toggle) => {
      toggle.setValue(true).onChange((current) => this.globalMatch = current);
    });
    new import_obsidian.Setting(contentEl).setName("Case sensitive").setDesc("Matches will be case sensitive.").addToggle((toggle) => {
      toggle.setValue(true).onChange((current) => this.sensitive = current);
    });
    new import_obsidian.Setting(contentEl).setName("Whole word").setDesc("Only match whole words.").addToggle((toggle) => {
      toggle.setValue(true).onChange((current) => this.word = current);
    });
    let footerEl = contentEl.createDiv();
    let footerButtons = new import_obsidian.Setting(footerEl);
    footerButtons.addButton((b) => {
      b.setTooltip("Save").setIcon("checkmark").onClick(() => __async(this, null, function* () {
        this.saved = true;
        this.close();
      }));
      return b;
    });
    footerButtons.addExtraButton((b) => {
      b.setTooltip("Cancel").setIcon("cross").onClick(() => {
        this.saved = false;
        this.close();
      });
      return b;
    });
  }
};
var EditTemplatesModal = class extends import_obsidian.Modal {
  constructor(app, templateTitle, templates) {
    super(app);
    this.saved = false;
    this.templateTitle = templateTitle;
    this.templates = templates;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    for (let i = 0; i < this.templates.length; i++) {
      if (this.templateTitle != void 0 && this.templates[i].title === this.templateTitle) {
        let titleText;
        new import_obsidian.Setting(contentEl).setName("Title").setDesc("Name of the template.").addText((text) => {
          titleText = text;
          titleText.setValue(this.templates[i].title).onChange((current) => {
            this.templates[i].title = current;
          });
        });
        let replacedText;
        new import_obsidian.Setting(contentEl).setName("Replace all ...").setDesc("Strings to be matched and replaced.").addText((text) => {
          replacedText = text;
          replacedText.setValue(this.templates[i].replaced).onChange((current) => {
            this.templates[i].replaced = current;
          });
        });
        let replacementText;
        new import_obsidian.Setting(contentEl).setName("... with").setDesc("String to replace all matches. Do not escape backslashes.").addText((text) => {
          replacementText = text;
          replacementText.setValue(this.templates[i].replacement).onChange((current) => {
            this.templates[i].replacement = current;
          });
        });
        new import_obsidian.Setting(contentEl).setName("Global").setDesc("Match all instances (instead of just the first)").addToggle((toggle) => {
          toggle.setValue(this.templates[i].globalMatch).onChange((current) => this.templates[i].globalMatch = current);
        });
        new import_obsidian.Setting(contentEl).setName("Case sensitive").setDesc("Matches will be case sensitive.").addToggle((toggle) => {
          toggle.setValue(this.templates[i].sensitive).onChange((current) => this.templates[i].sensitive = current);
        });
        new import_obsidian.Setting(contentEl).setName("Whole word").setDesc("Only match whole words.").addToggle((toggle) => {
          toggle.setValue(this.templates[i].sensitive).onChange((current) => this.templates[i].word = current);
        });
        break;
      }
    }
    let footerEl = contentEl.createDiv();
    let footerButtons = new import_obsidian.Setting(footerEl);
    footerButtons.addButton((b) => {
      b.setTooltip("Save").setIcon("checkmark").onClick(() => __async(this, null, function* () {
        this.saved = true;
        this.close();
      }));
      return b;
    });
    footerButtons.addExtraButton((b) => {
      b.setTooltip("Cancel").setIcon("cross").onClick(() => {
        this.saved = false;
        this.close();
      });
      return b;
    });
  }
};
var DeleteTemplatesModal = class extends import_obsidian.Modal {
  constructor(app, templateTitle) {
    super(app);
    this.proceed = false;
    this.templateTitle = templateTitle;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h3", { text: `Are you sure you want to delete '${this.templateTitle}'?` });
    let footerEl = contentEl.createDiv();
    let footerButtons = new import_obsidian.Setting(footerEl);
    footerButtons.addButton((b) => {
      b.setTooltip("Yes").setIcon("checkmark").onClick(() => __async(this, null, function* () {
        this.proceed = true;
        this.close();
      }));
      return b;
    });
    footerButtons.addExtraButton((b) => {
      b.setTooltip("Cancel").setIcon("cross").onClick(() => {
        this.proceed = false;
        this.close();
      });
      return b;
    });
  }
};

// src/utils.ts
function formatToRegex(str) {
  return str.replace(/\s/g, "\\s").replace(/\./g, "\\.").replace(/\(/g, "\\(").replace(/\)/g, "\\)").replace(/\{/g, "\\{").replace(/\}/g, "\\}").replace(/\[/g, "\\[").replace(/\]/g, "\\]");
}

// src/main.ts
var DEFAULT_SETTINGS = {
  templates: []
};
var MathLinks = class extends import_obsidian2.Plugin {
  onload() {
    return __async(this, null, function* () {
      yield this.loadSettings();
      this.addSettingTab(new MathLinksSettingTab(this.app, this));
      const settings = this.settings;
      const { vault } = this.app;
      const { workspace } = this.app;
      const { metadataCache } = this.app;
      const { fileManager } = this.app;
      metadataCache.on("changed", (file, data, cache) => __async(this, null, function* () {
        if (isExcluded(file))
          return null;
        console.log(file.name);
        let mathLink = yield getMathLink(file);
        if (mathLink != null && mathLink != void 0)
          updateBackLinks(file, mathLink[0]);
        else
          removeBackMathLinks(file);
        updateOutLinks(file);
      }));
      this.addCommand({
        id: "update_all_mathlinks",
        name: "Update all links",
        callback: () => __async(this, null, function* () {
          let allNotes = yield vault.getMarkdownFiles();
          let updateNotice = new Notice("MathLinks: Updating...");
          allNotes.forEach((note) => __async(this, null, function* () {
            if (!isExcluded(note)) {
              let mathLink = yield getMathLink(note);
              if (mathLink != null && mathLink != void 0)
                updateBackLinks(note, mathLink[0]);
              else
                removeBackMathLinks(note);
              updateOutLinks(note);
            }
          }));
          updateNotice.hide();
          new Notice("MathLinks: Done");
        })
      });
      function updateBackLinks(file, mathLink) {
        return __async(this, null, function* () {
          let backLinkFilePaths = getBackLinkFilePaths(file);
          if (backLinkFilePaths.length != 0) {
            backLinkFilePaths.forEach((backLinkFilePath) => __async(this, null, function* () {
              let backLinkFile = vault.getAbstractFileByPath(backLinkFilePath);
              if (backLinkFile instanceof import_obsidian2.TFile) {
                let backLinkFileContent = yield vault.read(backLinkFile);
                let modified = convertToMathLinks(file.name, backLinkFileContent, mathLink);
                if (backLinkFileContent != modified) {
                  vault.modify(backLinkFile, modified);
                }
              }
            }));
          }
        });
      }
      function removeBackMathLinks(file) {
        return __async(this, null, function* () {
          let backLinkFilePaths = getBackLinkFilePaths(file);
          if (backLinkFilePaths.length != 0) {
            backLinkFilePaths.forEach((backLinkFilePath) => __async(this, null, function* () {
              let backLinkFile = vault.getAbstractFileByPath(backLinkFilePath);
              if (backLinkFile instanceof import_obsidian2.TFile) {
                let backLinkFileContent = yield vault.read(backLinkFile);
                let modified = convertToDoubleLinks(file.name, backLinkFileContent);
                if (backLinkFileContent != modified) {
                  vault.modify(backLinkFile, modified);
                }
              }
            }));
          }
        });
      }
      function updateOutLinks(file) {
        return __async(this, null, function* () {
          let fileContent = yield vault.read(file);
          let modified = fileContent;
          let outLinks = yield metadataCache.getFileCache(file).links;
          if (outLinks != void 0) {
            outLinks.forEach((outLink) => __async(this, null, function* () {
              let outLinkFileName = outLink.link;
              if (outLink.displayText != "")
                outLinkFileName = outLinkFileName.replace(/$/, ".md");
              let outLinkFilePath = fileManager.getNewFileParent(outLinkFileName).path + "/" + outLinkFileName;
              let outLinkFile = vault.getAbstractFileByPath(outLinkFilePath);
              if (outLinkFile instanceof import_obsidian2.TFile) {
                let outLinkMathLink = yield getMathLink(outLinkFile);
                if (outLinkMathLink != null && outLinkMathLink != void 0) {
                  modified = convertToMathLinks(outLinkFileName, modified, outLinkMathLink[0]);
                  if (fileContent != modified) {
                    yield vault.modify(file, modified);
                  }
                }
              }
            }));
          }
        });
      }
      function getMathLink(file) {
        return __async(this, null, function* () {
          let contents = yield vault.read(file);
          contents = contents.split(/\r?\n/);
          if (contents[0] === "---") {
            for (let lineNumber = 1; lineNumber < contents.length; lineNumber++) {
              let line = contents[lineNumber];
              if (line.length < 10) {
                lineNumber++;
              } else {
                let key = line.substring(0, 10);
                if (key === "mathLink: ") {
                  let value = line.replace(key, "");
                  if (value != "") {
                    if (value === "auto") {
                      let mathLink = yield generateMathLinkFromAuto(file);
                      return [mathLink, lineNumber];
                    }
                    return [value, lineNumber];
                  } else {
                    return [null, lineNumber];
                  }
                } else if (line === "---") {
                  return void 0;
                } else {
                  lineNumber++;
                }
              }
            }
          }
          return void 0;
        });
      }
      function generateMathLinkFromAuto(file) {
        return __async(this, null, function* () {
          let templates = settings.templates;
          let baseName = file.name.replace(".md", "");
          let mathLink = baseName;
          for (let i = 0; i < templates.length; i++) {
            let replaced = new RegExp(formatToRegex(templates[i].replaced));
            let replacement = templates[i].replacement;
            let flags = "";
            if (templates[i].globalMatch)
              flags += "g";
            if (!templates[i].sensitive)
              flags += "i";
            if (templates[i].word)
              replaced = RegExp(replaced.source.replace(/^/, "\\b").replace(/$/, "\\b"), flags);
            else
              replaced = RegExp(replaced.source, flags);
            mathLink = mathLink.replace(replaced, replacement);
          }
          return mathLink;
        });
      }
      function getBackLinkFilePaths(file) {
        let backLinkFilePaths = [];
        Object.keys(metadataCache.resolvedLinks).forEach((key) => {
          let links = metadataCache.resolvedLinks[key];
          Object.keys(links).forEach((link) => {
            if (link === file.path) {
              backLinkFilePaths.push(key);
            }
          });
        });
        return backLinkFilePaths;
      }
      function convertToMathLinks(fileName, fileContent, mathLink) {
        let left = mathLink.replace(/^/, "[").replace(/$/, "]");
        let right = fileName.replace(/^/, "(").replace(/$/, ")").replace(/\s/g, "%20");
        let newLink = `${left}${right}`;
        let mixedLink = new RegExp("\\[((?!\\]\\(|\\]\\]).)*\\]" + formatToRegex(right), "g");
        let doubleLink = new RegExp(formatToRegex(fileName.replace(/^/, "[[").replace(/\.md$/, "]]")), "g");
        return fileContent.replace(mixedLink, newLink).replace(doubleLink, newLink);
      }
      function convertToDoubleLinks(fileName, fileContent) {
        let formattedName = fileName.replace(/^/, "(").replace(/$/, ")").replace(/\s/g, "%20");
        let mixedLink = new RegExp("\\[((?!\\]\\(|\\]\\]).)*\\]" + formatToRegex(formattedName), "g");
        let doubleLink = fileName.replace(/^/, "[[").replace(/\.md$/, "]]");
        return fileContent.replace(mixedLink, doubleLink);
      }
      function isExcluded(file) {
        return file.name === "README.md";
      }
    });
  }
  loadSettings() {
    return __async(this, null, function* () {
      this.settings = Object.assign({}, DEFAULT_SETTINGS, yield this.loadData());
    });
  }
  saveSettings() {
    return __async(this, null, function* () {
      yield this.saveData(this.settings);
    });
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3NldHRpbmdzLnRzIiwgInNyYy91dGlscy50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQXBwLCBQbHVnaW4sIE1hcmtkb3duVmlldywgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBNYXRoTGlua3NTZXR0aW5nVGFiIH0gZnJvbSAnLi9zZXR0aW5ncyc7XG5pbXBvcnQgeyBmb3JtYXRUb1JlZ2V4IH0gZnJvbSAnLi91dGlscyc7XG5cbmludGVyZmFjZSBNYXRoTGlua3NTZXR0aW5ncyB7XG4gICAgdGVtcGxhdGVzOiBzdHJpbmdbXTtcbn1cblxuY29uc3QgREVGQVVMVF9TRVRUSU5HUzogTWF0aExpbmtzU2V0dGluZ3MgPSB7XG4gICAgdGVtcGxhdGVzOiBbXVxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNYXRoTGlua3MgZXh0ZW5kcyBQbHVnaW4ge1xuICAgIHNldHRpbmdzOiBNYXRoTGlua3NTZXR0aW5ncztcblxuICAgIGFzeW5jIG9ubG9hZCgpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcbiAgICAgICAgdGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBNYXRoTGlua3NTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XG4gICAgICAgIGNvbnN0IHNldHRpbmdzID0gdGhpcy5zZXR0aW5ncztcblxuICAgICAgICBjb25zdCB7IHZhdWx0IH0gPSB0aGlzLmFwcDtcbiAgICAgICAgY29uc3QgeyB3b3Jrc3BhY2UgfSA9IHRoaXMuYXBwO1xuICAgICAgICBjb25zdCB7IG1ldGFkYXRhQ2FjaGUgfSA9IHRoaXMuYXBwO1xuICAgICAgICBjb25zdCB7IGZpbGVNYW5hZ2VyIH0gPSB0aGlzLmFwcDtcblxuICAgICAgICAvLyBSdW5zIHdoZW4gZmlsZSBpcyB1cGRhdGVkXG4gICAgICAgIC8vIFdhbnQgdG8gbW9kaWZ5IGl0IHNvIGl0IHJ1bnMgb25seSBpZiBhIG1hdGhMaW5rIGlzIHVwZGF0ZWQvZ2VuZXJhdGVkIG9yIGlmIGEgbGluayBpcyBjcmVhdGVkLlxuICAgICAgICBtZXRhZGF0YUNhY2hlLm9uKCdjaGFuZ2VkJywgYXN5bmMgKGZpbGU6IFRGaWxlLCBkYXRhOiBzdHJpbmcsIGNhY2hlOiBDYWNoZWRNZXRhRGF0YSkgPT4ge1xuICAgICAgICAgICAgaWYgKGlzRXhjbHVkZWQoZmlsZSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGZpbGUubmFtZSk7XG5cbiAgICAgICAgICAgIGxldCBtYXRoTGluayA9IGF3YWl0IGdldE1hdGhMaW5rKGZpbGUpO1xuICAgICAgICAgICAgaWYgKG1hdGhMaW5rICE9IG51bGwgJiYgbWF0aExpbmsgIT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgIHVwZGF0ZUJhY2tMaW5rcyhmaWxlLCBtYXRoTGlua1swXSk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgcmVtb3ZlQmFja01hdGhMaW5rcyhmaWxlKTtcblxuICAgICAgICAgICAgdXBkYXRlT3V0TGlua3MoZmlsZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFVwZGF0ZSBhbGwgbWF0aExpbmtzXG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogXCJ1cGRhdGVfYWxsX21hdGhsaW5rc1wiLFxuICAgICAgICAgICAgbmFtZTogXCJVcGRhdGUgYWxsIGxpbmtzXCIsXG4gICAgICAgICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBhbGxOb3RlcyA9IGF3YWl0IHZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICAgICAgICAgICAgICBsZXQgdXBkYXRlTm90aWNlID0gbmV3IE5vdGljZSgnTWF0aExpbmtzOiBVcGRhdGluZy4uLicpO1xuXG4gICAgICAgICAgICAgICAgYWxsTm90ZXMuZm9yRWFjaChhc3luYyAobm90ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzRXhjbHVkZWQobm90ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtYXRoTGluayA9IGF3YWl0IGdldE1hdGhMaW5rKG5vdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGhMaW5rICE9IG51bGwgJiYgbWF0aExpbmsgIT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZUJhY2tMaW5rcyhub3RlLCBtYXRoTGlua1swXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlQmFja01hdGhMaW5rcyhub3RlKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlT3V0TGlua3Mobm90ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHVwZGF0ZU5vdGljZS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnTWF0aExpbmtzOiBEb25lJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFVwZGF0ZSBhbGwgbGlua3MgaW4gYmFja0xpbmtGaWxlXG4gICAgICAgIGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUJhY2tMaW5rcyhmaWxlOiBURmlsZSwgbWF0aExpbms6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICAgICAgbGV0IGJhY2tMaW5rRmlsZVBhdGhzID0gZ2V0QmFja0xpbmtGaWxlUGF0aHMoZmlsZSk7XG4gICAgICAgICAgICBpZiAoYmFja0xpbmtGaWxlUGF0aHMubGVuZ3RoICE9IDApIHtcbiAgICAgICAgICAgICAgICBiYWNrTGlua0ZpbGVQYXRocy5mb3JFYWNoKGFzeW5jIChiYWNrTGlua0ZpbGVQYXRoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBiYWNrTGlua0ZpbGUgPSB2YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoYmFja0xpbmtGaWxlUGF0aCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChiYWNrTGlua0ZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGJhY2tMaW5rRmlsZUNvbnRlbnQgPSBhd2FpdCB2YXVsdC5yZWFkKGJhY2tMaW5rRmlsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbW9kaWZpZWQgPSBjb252ZXJ0VG9NYXRoTGlua3MoZmlsZS5uYW1lLCBiYWNrTGlua0ZpbGVDb250ZW50LCBtYXRoTGluayk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiYWNrTGlua0ZpbGVDb250ZW50ICE9IG1vZGlmaWVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmF1bHQubW9kaWZ5KGJhY2tMaW5rRmlsZSwgbW9kaWZpZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBhc3luYyBmdW5jdGlvbiByZW1vdmVCYWNrTWF0aExpbmtzKGZpbGU6IFRGaWxlKTogdm9pZCB7XG4gICAgICAgICAgICBsZXQgYmFja0xpbmtGaWxlUGF0aHMgPSBnZXRCYWNrTGlua0ZpbGVQYXRocyhmaWxlKTtcbiAgICAgICAgICAgIGlmIChiYWNrTGlua0ZpbGVQYXRocy5sZW5ndGggIT0gMCkge1xuICAgICAgICAgICAgICAgIGJhY2tMaW5rRmlsZVBhdGhzLmZvckVhY2goYXN5bmMgKGJhY2tMaW5rRmlsZVBhdGgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGJhY2tMaW5rRmlsZSA9IHZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChiYWNrTGlua0ZpbGVQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJhY2tMaW5rRmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgYmFja0xpbmtGaWxlQ29udGVudCA9IGF3YWl0IHZhdWx0LnJlYWQoYmFja0xpbmtGaWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtb2RpZmllZCA9IGNvbnZlcnRUb0RvdWJsZUxpbmtzKGZpbGUubmFtZSwgYmFja0xpbmtGaWxlQ29udGVudCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiYWNrTGlua0ZpbGVDb250ZW50ICE9IG1vZGlmaWVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmF1bHQubW9kaWZ5KGJhY2tMaW5rRmlsZSwgbW9kaWZpZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBVcGRhdGUgb3V0TGlua3MgaW4gZmlsZVxuICAgICAgICBhc3luYyBmdW5jdGlvbiB1cGRhdGVPdXRMaW5rcyhmaWxlOiBURmlsZSk6IHZvaWQge1xuICAgICAgICAgICAgbGV0IGZpbGVDb250ZW50ID0gYXdhaXQgdmF1bHQucmVhZChmaWxlKTtcbiAgICAgICAgICAgIGxldCBtb2RpZmllZCA9IGZpbGVDb250ZW50O1xuXG4gICAgICAgICAgICBsZXQgb3V0TGlua3MgPSBhd2FpdCBtZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKS5saW5rcztcbiAgICAgICAgICAgIGlmIChvdXRMaW5rcyAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBvdXRMaW5rcy5mb3JFYWNoKGFzeW5jIChvdXRMaW5rKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBvdXRMaW5rRmlsZU5hbWUgPSBvdXRMaW5rLmxpbms7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvdXRMaW5rLmRpc3BsYXlUZXh0ICE9IFwiXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRMaW5rRmlsZU5hbWUgPSBvdXRMaW5rRmlsZU5hbWUucmVwbGFjZSgvJC8sICcubWQnKTtcblxuICAgICAgICAgICAgICAgICAgICBsZXQgb3V0TGlua0ZpbGVQYXRoID0gZmlsZU1hbmFnZXIuZ2V0TmV3RmlsZVBhcmVudChvdXRMaW5rRmlsZU5hbWUpLnBhdGggKyAnLycgKyBvdXRMaW5rRmlsZU5hbWU7XG4gICAgICAgICAgICAgICAgICAgIGxldCBvdXRMaW5rRmlsZSA9IHZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChvdXRMaW5rRmlsZVBhdGgpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChvdXRMaW5rRmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgb3V0TGlua01hdGhMaW5rID0gYXdhaXQgZ2V0TWF0aExpbmsob3V0TGlua0ZpbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG91dExpbmtNYXRoTGluayAhPSBudWxsICYmIG91dExpbmtNYXRoTGluayAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RpZmllZCA9IGNvbnZlcnRUb01hdGhMaW5rcyhvdXRMaW5rRmlsZU5hbWUsIG1vZGlmaWVkLCBvdXRMaW5rTWF0aExpbmtbMF0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpbGVDb250ZW50ICE9IG1vZGlmaWVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHZhdWx0Lm1vZGlmeShmaWxlLCBtb2RpZmllZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBHZXQgbWF0aExpbmsgYXMgc3RyaW5nICh3aXRoIGxpbmVOdW1iZXIpLlxuICAgICAgICAvLyAgICAgSWYga2V5IGV4aXN0cyBidXQgbm90IHZhbHVlLCByZXR1cm4gbnVsbCAod2l0aCBsaW5lTnVtYmVyKS5cbiAgICAgICAgLy8gICAgIFVuZGVmaW5lZCBvdGhlcndpc2UuXG4gICAgICAgIGFzeW5jIGZ1bmN0aW9uIGdldE1hdGhMaW5rKGZpbGU6IFRGaWxlKTogW3N0cmluZywgbnVtYmVyXSB8IFtudWxsLCBudW1iZXJdIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgICAgIGxldCBjb250ZW50cyA9IGF3YWl0IHZhdWx0LnJlYWQoZmlsZSk7XG4gICAgICAgICAgICBjb250ZW50cyA9IGNvbnRlbnRzLnNwbGl0KC9cXHI/XFxuLyk7XG5cbiAgICAgICAgICAgIGlmIChjb250ZW50c1swXSA9PT0gJy0tLScpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBsaW5lTnVtYmVyID0gMTsgbGluZU51bWJlciA8IGNvbnRlbnRzLmxlbmd0aDsgbGluZU51bWJlcisrKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBsaW5lID0gY29udGVudHNbbGluZU51bWJlcl07XG4gICAgICAgICAgICAgICAgICAgIGlmIChsaW5lLmxlbmd0aCA8IDEwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5lTnVtYmVyKys7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQga2V5ID0gbGluZS5zdWJzdHJpbmcoMCwgMTApO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGtleSA9PT0gJ21hdGhMaW5rOiAnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHZhbHVlID0gbGluZS5yZXBsYWNlKGtleSwgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAhPSAnJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09ICdhdXRvJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1hdGhMaW5rID0gYXdhaXQgZ2VuZXJhdGVNYXRoTGlua0Zyb21BdXRvKGZpbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFttYXRoTGluaywgbGluZU51bWJlcl07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFt2YWx1ZSwgbGluZU51bWJlcl07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtudWxsLCBsaW5lTnVtYmVyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxpbmUgPT09ICctLS0nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZU51bWJlcisrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEdlbmVyYXRlIG1hdGhMaW5rIGZyb20gZmlsZS5uYW1lXG4gICAgICAgIGFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlTWF0aExpbmtGcm9tQXV0byhmaWxlOiBUZmlsZSk6IHN0cmluZyB7XG4gICAgICAgICAgICBsZXQgdGVtcGxhdGVzID0gc2V0dGluZ3MudGVtcGxhdGVzO1xuICAgICAgICAgICAgbGV0IGJhc2VOYW1lID0gIGZpbGUubmFtZS5yZXBsYWNlKCdcXC5tZCcsICcnKTtcbiAgICAgICAgICAgIGxldCBtYXRoTGluayA9IGJhc2VOYW1lO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0ZW1wbGF0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgcmVwbGFjZWQgPSBuZXcgUmVnRXhwKGZvcm1hdFRvUmVnZXgodGVtcGxhdGVzW2ldLnJlcGxhY2VkKSk7XG4gICAgICAgICAgICAgICAgbGV0IHJlcGxhY2VtZW50ID0gdGVtcGxhdGVzW2ldLnJlcGxhY2VtZW50O1xuXG4gICAgICAgICAgICAgICAgbGV0IGZsYWdzID0gJyc7XG4gICAgICAgICAgICAgICAgaWYgKHRlbXBsYXRlc1tpXS5nbG9iYWxNYXRjaClcbiAgICAgICAgICAgICAgICAgICAgZmxhZ3MgKz0gJ2cnO1xuICAgICAgICAgICAgICAgIGlmICghdGVtcGxhdGVzW2ldLnNlbnNpdGl2ZSlcbiAgICAgICAgICAgICAgICAgICAgZmxhZ3MgKz0gJ2knO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRlbXBsYXRlc1tpXS53b3JkKVxuICAgICAgICAgICAgICAgICAgICByZXBsYWNlZCA9IFJlZ0V4cChyZXBsYWNlZC5zb3VyY2UucmVwbGFjZSgvXi8sICdcXFxcYicpLnJlcGxhY2UoLyQvLCAnXFxcXGInKSwgZmxhZ3MpO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgcmVwbGFjZWQgPSBSZWdFeHAocmVwbGFjZWQuc291cmNlLCBmbGFncyk7XG5cbiAgICAgICAgICAgICAgICBtYXRoTGluayA9IG1hdGhMaW5rLnJlcGxhY2UocmVwbGFjZWQsIHJlcGxhY2VtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtYXRoTGluaztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEdlbmVyYXRlIGJhY2tMaW5rRmlsZVBhdGhzIG9mIGZpbGVcbiAgICAgICAgZnVuY3Rpb24gZ2V0QmFja0xpbmtGaWxlUGF0aHMoZmlsZTogVGZpbGUpOiBzdHJpbmdbXSB7XG4gICAgICAgICAgICBsZXQgYmFja0xpbmtGaWxlUGF0aHM6IHN0cmluZ1tdID0gW107XG4gICAgICAgICAgICBPYmplY3Qua2V5cyhtZXRhZGF0YUNhY2hlLnJlc29sdmVkTGlua3MpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBsaW5rcyA9IG1ldGFkYXRhQ2FjaGUucmVzb2x2ZWRMaW5rc1trZXldO1xuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKGxpbmtzKS5mb3JFYWNoKChsaW5rKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsaW5rID09PSBmaWxlLnBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tMaW5rRmlsZVBhdGhzLnB1c2goa2V5KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiBiYWNrTGlua0ZpbGVQYXRocztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENvbnZlcnQgbWl4ZWQgYW5kIGRvdWJsZSBsaW5rcyB0byBtYXRoTGlua3NcbiAgICAgICAgZnVuY3Rpb24gY29udmVydFRvTWF0aExpbmtzKGZpbGVOYW1lOiBzdHJpbmcsIGZpbGVDb250ZW50OiBzdHJpbmcsIG1hdGhMaW5rOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICAgICAgbGV0IGxlZnQgPSBtYXRoTGluay5yZXBsYWNlKC9eLywgJ1snKS5yZXBsYWNlKC8kLywgJ10nKTtcbiAgICAgICAgICAgIGxldCByaWdodCA9IGZpbGVOYW1lLnJlcGxhY2UoL14vLCAnKCcpLnJlcGxhY2UoLyQvLCAnKScpLnJlcGxhY2UoL1xccy9nLCAnJTIwJyk7XG4gICAgICAgICAgICBsZXQgbmV3TGluayA9IGAke2xlZnR9JHtyaWdodH1gO1xuXG4gICAgICAgICAgICBsZXQgbWl4ZWRMaW5rID0gbmV3IFJlZ0V4cCgnXFxcXFsoKD8hXFxcXF1cXFxcKHxcXFxcXVxcXFxdKS4pKlxcXFxdJyArIGZvcm1hdFRvUmVnZXgocmlnaHQpLCAnZycpO1xuICAgICAgICAgICAgbGV0IGRvdWJsZUxpbmsgPSBuZXcgUmVnRXhwKGZvcm1hdFRvUmVnZXgoZmlsZU5hbWUucmVwbGFjZSgvXi8sICdcXFtcXFsnKS5yZXBsYWNlKC9cXC5tZCQvLCAnXFxdXFxdJykpLCAnZycpO1xuXG4gICAgICAgICAgICByZXR1cm4gZmlsZUNvbnRlbnQucmVwbGFjZShtaXhlZExpbmssIG5ld0xpbmspLnJlcGxhY2UoZG91YmxlTGluaywgbmV3TGluayk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDb252ZXJ0IG1hdGhMaW5rcyB0byBkb3VibGUgbGlua3NcbiAgICAgICAgZnVuY3Rpb24gY29udmVydFRvRG91YmxlTGlua3MoZmlsZU5hbWU6IHN0cmluZywgZmlsZUNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgICAgICBsZXQgZm9ybWF0dGVkTmFtZSA9IGZpbGVOYW1lLnJlcGxhY2UoL14vLCAnKCcpLnJlcGxhY2UoLyQvLCAnKScpLnJlcGxhY2UoL1xccy9nLCAnJTIwJyk7XG5cbiAgICAgICAgICAgIGxldCBtaXhlZExpbmsgPSBuZXcgUmVnRXhwKCdcXFxcWygoPyFcXFxcXVxcXFwofFxcXFxdXFxcXF0pLikqXFxcXF0nICsgZm9ybWF0VG9SZWdleChmb3JtYXR0ZWROYW1lKSwgJ2cnKTtcbiAgICAgICAgICAgIGxldCBkb3VibGVMaW5rID0gZmlsZU5hbWUucmVwbGFjZSgvXi8sICdbWycpLnJlcGxhY2UoL1xcLm1kJC8sICddXScpO1xuXG4gICAgICAgICAgICByZXR1cm4gZmlsZUNvbnRlbnQucmVwbGFjZShtaXhlZExpbmssIGRvdWJsZUxpbmspO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgZmlsZSBpcyBleGNsdWRlZDsgbmVlZCB0byBhZGQgdGhpcyB0byBzZXR0aW5nc1xuICAgICAgICBmdW5jdGlvbiBpc0V4Y2x1ZGVkKGZpbGU6IFRGaWxlKTogYm9vbGVhbiB7XG4gICAgICAgICAgICByZXR1cm4gZmlsZS5uYW1lID09PSAnUkVBRE1FLm1kJztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XG4gICAgfVxuXG4gICAgYXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuICAgICAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBTZXR0aW5nLCBQbHVnaW5TZXR0aW5nVGFiLCBNb2RhbCwgVGV4dENvbXBvbmVudCwgRHJvcGRvd25Db21wb25lbnQsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcblxuZXhwb3J0IGNsYXNzIE1hdGhMaW5rc1NldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcbiAgICBwbHVnaW46IE1hdGhMaW5rcztcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IE1hdGhMaW5rcykge1xuICAgICAgICBzdXBlcihhcHAsIHBsdWdpbik7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIH1cblxuICAgIGFzeW5jIGRpc3BsYXkoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG5cbiAgICAgICAgY29udGFpbmVyRWwuZW1wdHkoKTtcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywge3RleHQ6ICdNYXRoTGlua3MgU2V0dGluZ3MnfSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnQWRkIGEgbmV3IHRlbXBsYXRlJylcbiAgICAgICAgICAgIC5zZXREZXNjKFxuICAgICAgICAgICAgICAgIGNyZWF0ZUZyYWdtZW50KChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGUuY3JlYXRlU3Bhbih7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnQXV0b21hdGljYWxseSBnZW5lcmF0ZSBhIG1hdGhMaW5rIHdpdGggdGVtcGxhdGVzLiBVc2UgJ1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgZS5jcmVhdGVFbCgnY29kZScsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6ICdtYXRoTGluazogYXV0bydcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGUuY3JlYXRlU3Bhbih7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnIHRvIHVzZSB0ZW1wbGF0ZXMgaW4gYSBmaWxlLidcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIC5hZGRCdXR0b24oKGJ1dHRvbjogQnV0dG9uQ29tcG9uZW50KTogQnV0dG9uQ29tcG9uZW50ID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgYiA9IGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAuc2V0VG9vbHRpcChcIkFkZFwiKVxuICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbihcInBsdXNcIilcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1vZGFsID0gbmV3IEFkZFRlbXBsYXRlc01vZGFsKHRoaXMuYXBwKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kYWwub25DbG9zZSA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobW9kYWwuc2F2ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcGxhdGUgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogbW9kYWwudGl0bGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBsYWNlZDogbW9kYWwucmVwbGFjZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogbW9kYWwucmVwbGFjZW1lbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnbG9iYWxNYXRjaDogbW9kYWwuZ2xvYmFsTWF0Y2gsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW5zaXRpdmU6IG1vZGFsLnNlbnNpdGl2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdvcmQ6IG1vZGFsLndvcmRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50ZW1wbGF0ZXMucHVzaCh0ZW1wbGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdNYXRoTGlua3M6IFRlbXBsYXRlIGFkZGVkLicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGFsLm9wZW4oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYjtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIGxldCB0ZW1wbGF0ZVRpdGxlVG9FZGl0OiBzdHJpbmcgfCBudWxsO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdFZGl0IHRlbXBsYXRlJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdTZWxlY3QgYSB0ZW1wbGF0ZSB0byBlZGl0IGl0LicpXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oKGRyb3Bkb3duOiBEcm9wZG93bkNvbXBvbmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGRyb3Bkb3duLmFkZE9wdGlvbihcIl9fc2VsZWN0XCIsIFwiU2VsZWN0XCIpO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGVtcGxhdGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duLmFkZE9wdGlvbih0aGlzLnBsdWdpbi5zZXR0aW5ncy50ZW1wbGF0ZXNbaV0udGl0bGUsIHRoaXMucGx1Z2luLnNldHRpbmdzLnRlbXBsYXRlc1tpXS50aXRsZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRyb3Bkb3duLm9uQ2hhbmdlKGFzeW5jIChjdXJyZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50ICE9ICdfX3NlbGVjdCcpXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVRpdGxlVG9FZGl0ID0gY3VycmVudDtcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVUaXRsZVRvRWRpdCA9IG51bGw7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmFkZEV4dHJhQnV0dG9uKChidXR0b246IEJ1dHRvbkNvbXBvbmVudCk6IEJ1dHRvbkNvbXBvbmVudCA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGIgPSBidXR0b25cbiAgICAgICAgICAgICAgICAgICAgLnNldFRvb2x0aXAoXCJFZGl0XCIpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKFwiZWRpdFwiKVxuICAgICAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGVtcGxhdGVUaXRsZVRvRWRpdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvcmlnaW5hbFRlbXBsYXRlcyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5wbHVnaW4uc2V0dGluZ3MudGVtcGxhdGVzKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1vZGFsID0gbmV3IEVkaXRUZW1wbGF0ZXNNb2RhbCh0aGlzLmFwcCwgdGVtcGxhdGVUaXRsZVRvRWRpdCwgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGVtcGxhdGVzKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGFsLm9uQ2xvc2UgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtb2RhbC5zYXZlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdNYXRoTGlua3M6IFRlbXBsYXRlIHNhdmVkLicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGVtcGxhdGVzID0gb3JpZ2luYWxUZW1wbGF0ZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kYWwub3BlbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdNYXRoTGlua3M6IFBsZWFzZSBzZWxlY3QgYSB0ZW1wbGF0ZS4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGI7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICBsZXQgdGVtcGxhdGVUaXRsZVRvRGVsZXRlOiBzdHJpbmcgfCBudWxsO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdEZWxldGUgYSB0ZW1wbGF0ZScpXG4gICAgICAgICAgICAuc2V0RGVzYygnU2VsZWN0IGEgdGVtcGxhdGUgdG8gZGVsZXRlIGl0LicpXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oKGRyb3Bkb3duOiBEcm9wZG93bkNvbXBvbmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGRyb3Bkb3duLmFkZE9wdGlvbihcIl9fc2VsZWN0XCIsIFwiU2VsZWN0XCIpO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGVtcGxhdGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duLmFkZE9wdGlvbih0aGlzLnBsdWdpbi5zZXR0aW5ncy50ZW1wbGF0ZXNbaV0udGl0bGUsIHRoaXMucGx1Z2luLnNldHRpbmdzLnRlbXBsYXRlc1tpXS50aXRsZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRyb3Bkb3duLm9uQ2hhbmdlKGFzeW5jIChjdXJyZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50ICE9ICdfX3NlbGVjdCcpXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVRpdGxlVG9EZWxldGUgPSBjdXJyZW50O1xuICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVRpdGxlVG9EZWxldGUgPSBudWxsO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5hZGRFeHRyYUJ1dHRvbigoYnV0dG9uOiBCdXR0b25Db21wb25lbnQpOiBCdXR0b25Db21wb25lbnQgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBiID0gYnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIC5zZXRUb29sdGlwKFwiRGVsZXRlXCIpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKFwidHJhc2hcIilcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRlbXBsYXRlVGl0bGVUb0RlbGV0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtb2RhbCA9IG5ldyBEZWxldGVUZW1wbGF0ZXNNb2RhbCh0aGlzLmFwcCwgdGVtcGxhdGVUaXRsZVRvRGVsZXRlKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGFsLm9uQ2xvc2UgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtb2RhbC5wcm9jZWVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucGx1Z2luLnNldHRpbmdzLnRlbXBsYXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy50ZW1wbGF0ZXNbaV0udGl0bGUgPT09IHRlbXBsYXRlVGl0bGVUb0RlbGV0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50ZW1wbGF0ZXMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShgTWF0aExpbmtzOiBUZW1wbGF0ZSAnJHt0ZW1wbGF0ZVRpdGxlVG9EZWxldGV9JyBkZWxldGVkLmApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kYWwub3BlbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdNYXRoTGlua3M6IFBsZWFzZSBzZWxlY3QgYSB0ZW1wbGF0ZS4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGI7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG59XG5cbmNsYXNzIEFkZFRlbXBsYXRlc01vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIHNhdmVkOiBib29sZWFuID0gZmFsc2U7XG4gICAgdGl0bGU6IHN0cmluZyA9ICcnO1xuXG4gICAgcmVwbGFjZWQ6IHN0cmluZyA9ICcnO1xuICAgIHJlcGxhY2VtZW50OiBzdHJpbmcgPSAnJztcblxuICAgIGdsb2JhbE1hdGNoOiBib29sZWFuID0gdHJ1ZTtcbiAgICBzZW5zaXRpdmU6IGJvb2xlYW4gPSB0cnVlO1xuICAgIHdvcmQ6IGJvb2xlYW4gPSB0cnVlXG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCkge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG5cbiAgICAgICAgbGV0IHRpdGxlVGV4dDogVGV4dENvbXBvbmVudDtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ1RpdGxlJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdOYW1lIG9mIHRoZSB0ZW1wbGF0ZS4nKVxuICAgICAgICAgICAgLmFkZFRleHQoKHRleHQpID0+IHtcbiAgICAgICAgICAgICAgICB0aXRsZVRleHQgPSB0ZXh0O1xuICAgICAgICAgICAgICAgIHRpdGxlVGV4dC5zZXRWYWx1ZSh0aGlzLnRpdGxlKS5vbkNoYW5nZSgoY3VycmVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRpdGxlID0gY3VycmVudDtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIGxldCByZXBsYWNlZFRleHQ6IFRleHRDb21wb25lbnQ7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdSZXBsYWNlIGFsbCAuLi4nKVxuICAgICAgICAgICAgLnNldERlc2MoJ1N0cmluZ3MgdG8gYmUgbWF0Y2hlZCBhbmQgcmVwbGFjZWQuJylcbiAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PiB7XG4gICAgICAgICAgICAgICAgcmVwbGFjZWRUZXh0ID0gdGV4dDtcbiAgICAgICAgICAgICAgICByZXBsYWNlZFRleHQuc2V0VmFsdWUodGhpcy5yZXBsYWNlZCkub25DaGFuZ2UoKGN1cnJlbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXBsYWNlZCA9IGN1cnJlbnQ7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICBsZXQgcmVwbGFjZW1lbnRUZXh0OiBUZXh0Q29tcG9uZW50O1xuICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnLi4uIHdpdGgnKVxuICAgICAgICAgICAgLnNldERlc2MoJ1N0cmluZyB0byByZXBsYWNlIGFsbCBtYXRjaGVzLiBEbyBub3QgZXNjYXBlIGJhY2tzbGFzaGVzLicpXG4gICAgICAgICAgICAuYWRkVGV4dCgodGV4dCkgPT4ge1xuICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50VGV4dCA9IHRleHQ7XG4gICAgICAgICAgICAgICAgcmVwbGFjZW1lbnRUZXh0LnNldFZhbHVlKHRoaXMucmVwbGFjZW1lbnQpLm9uQ2hhbmdlKChjdXJyZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVwbGFjZW1lbnQgPSBjdXJyZW50O1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0dsb2JhbCcpXG4gICAgICAgICAgICAuc2V0RGVzYygnTWF0Y2ggYWxsIGluc3RhbmNlcyAoaW5zdGVhZCBvZiBqdXN0IHRoZSBmaXJzdCkuJylcbiAgICAgICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRvZ2dsZS5zZXRWYWx1ZSh0cnVlKS5vbkNoYW5nZSgoY3VycmVudCkgPT4gKHRoaXMuZ2xvYmFsTWF0Y2ggPSBjdXJyZW50KSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnQ2FzZSBzZW5zaXRpdmUnKVxuICAgICAgICAgICAgLnNldERlc2MoJ01hdGNoZXMgd2lsbCBiZSBjYXNlIHNlbnNpdGl2ZS4nKVxuICAgICAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XG4gICAgICAgICAgICAgICAgdG9nZ2xlLnNldFZhbHVlKHRydWUpLm9uQ2hhbmdlKChjdXJyZW50KSA9PiAodGhpcy5zZW5zaXRpdmUgPSBjdXJyZW50KSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnV2hvbGUgd29yZCcpXG4gICAgICAgICAgICAuc2V0RGVzYygnT25seSBtYXRjaCB3aG9sZSB3b3Jkcy4nKVxuICAgICAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XG4gICAgICAgICAgICAgICAgdG9nZ2xlLnNldFZhbHVlKHRydWUpLm9uQ2hhbmdlKChjdXJyZW50KSA9PiAodGhpcy53b3JkID0gY3VycmVudCkpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgbGV0IGZvb3RlckVsID0gY29udGVudEVsLmNyZWF0ZURpdigpO1xuICAgICAgICBsZXQgZm9vdGVyQnV0dG9ucyA9IG5ldyBTZXR0aW5nKGZvb3RlckVsKTtcbiAgICAgICAgZm9vdGVyQnV0dG9ucy5hZGRCdXR0b24oKGIpID0+IHtcbiAgICAgICAgICAgIGIuc2V0VG9vbHRpcChcIlNhdmVcIilcbiAgICAgICAgICAgICAgICAuc2V0SWNvbihcImNoZWNrbWFya1wiKVxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zYXZlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBiO1xuICAgICAgICB9KTtcbiAgICAgICAgZm9vdGVyQnV0dG9ucy5hZGRFeHRyYUJ1dHRvbigoYikgPT4ge1xuICAgICAgICAgICAgYi5zZXRUb29sdGlwKFwiQ2FuY2VsXCIpXG4gICAgICAgICAgICAgICAgLnNldEljb24oXCJjcm9zc1wiKVxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zYXZlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gYjtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5jbGFzcyBFZGl0VGVtcGxhdGVzTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgc2F2ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICB0ZW1wbGF0ZVRpdGxlOiBzdHJpbmc7XG4gICAgdGVtcGxhdGVzOiBzdHJpbmdbXTtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCB0ZW1wbGF0ZVRpdGxlOiBzdHJpbmcsIHRlbXBsYXRlczogc3RyaW5nW10pIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy50ZW1wbGF0ZVRpdGxlID0gdGVtcGxhdGVUaXRsZTtcbiAgICAgICAgdGhpcy50ZW1wbGF0ZXMgPSB0ZW1wbGF0ZXM7XG4gICAgfVxuXG4gICAgb25PcGVuKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblxuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudGVtcGxhdGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAodGhpcy50ZW1wbGF0ZVRpdGxlICE9IHVuZGVmaW5lZCAmJiB0aGlzLnRlbXBsYXRlc1tpXS50aXRsZSA9PT0gdGhpcy50ZW1wbGF0ZVRpdGxlKSB7XG4gICAgICAgICAgICAgICAgbGV0IHRpdGxlVGV4dDogVGV4dENvbXBvbmVudDtcbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdUaXRsZScpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdOYW1lIG9mIHRoZSB0ZW1wbGF0ZS4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGVUZXh0ID0gdGV4dDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlVGV4dC5zZXRWYWx1ZSh0aGlzLnRlbXBsYXRlc1tpXS50aXRsZSkub25DaGFuZ2UoKGN1cnJlbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRlbXBsYXRlc1tpXS50aXRsZSA9IGN1cnJlbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBsZXQgcmVwbGFjZWRUZXh0OiBUZXh0Q29tcG9uZW50O1xuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ1JlcGxhY2UgYWxsIC4uLicpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdTdHJpbmdzIHRvIGJlIG1hdGNoZWQgYW5kIHJlcGxhY2VkLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXBsYWNlZFRleHQgPSB0ZXh0O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVwbGFjZWRUZXh0LnNldFZhbHVlKHRoaXMudGVtcGxhdGVzW2ldLnJlcGxhY2VkKS5vbkNoYW5nZSgoY3VycmVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGVtcGxhdGVzW2ldLnJlcGxhY2VkID0gY3VycmVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGxldCByZXBsYWNlbWVudFRleHQ6IFRleHRDb21wb25lbnQ7XG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnLi4uIHdpdGgnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnU3RyaW5nIHRvIHJlcGxhY2UgYWxsIG1hdGNoZXMuIERvIG5vdCBlc2NhcGUgYmFja3NsYXNoZXMuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50VGV4dCA9IHRleHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXBsYWNlbWVudFRleHQuc2V0VmFsdWUodGhpcy50ZW1wbGF0ZXNbaV0ucmVwbGFjZW1lbnQpLm9uQ2hhbmdlKChjdXJyZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZXNbaV0ucmVwbGFjZW1lbnQgPSBjdXJyZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnR2xvYmFsJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ01hdGNoIGFsbCBpbnN0YW5jZXMgKGluc3RlYWQgb2YganVzdCB0aGUgZmlyc3QpJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b2dnbGUuc2V0VmFsdWUodGhpcy50ZW1wbGF0ZXNbaV0uZ2xvYmFsTWF0Y2gpLm9uQ2hhbmdlKChjdXJyZW50KSA9PiAodGhpcy50ZW1wbGF0ZXNbaV0uZ2xvYmFsTWF0Y2ggPSBjdXJyZW50KSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnQ2FzZSBzZW5zaXRpdmUnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnTWF0Y2hlcyB3aWxsIGJlIGNhc2Ugc2Vuc2l0aXZlLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9nZ2xlLnNldFZhbHVlKHRoaXMudGVtcGxhdGVzW2ldLnNlbnNpdGl2ZSkub25DaGFuZ2UoKGN1cnJlbnQpID0+ICh0aGlzLnRlbXBsYXRlc1tpXS5zZW5zaXRpdmUgPSBjdXJyZW50KSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnV2hvbGUgd29yZCcpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdPbmx5IG1hdGNoIHdob2xlIHdvcmRzLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9nZ2xlLnNldFZhbHVlKHRoaXMudGVtcGxhdGVzW2ldLnNlbnNpdGl2ZSkub25DaGFuZ2UoKGN1cnJlbnQpID0+ICh0aGlzLnRlbXBsYXRlc1tpXS53b3JkID0gY3VycmVudCkpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGZvb3RlckVsID0gY29udGVudEVsLmNyZWF0ZURpdigpO1xuICAgICAgICBsZXQgZm9vdGVyQnV0dG9ucyA9IG5ldyBTZXR0aW5nKGZvb3RlckVsKTtcbiAgICAgICAgZm9vdGVyQnV0dG9ucy5hZGRCdXR0b24oKGIpID0+IHtcbiAgICAgICAgICAgIGIuc2V0VG9vbHRpcChcIlNhdmVcIilcbiAgICAgICAgICAgICAgICAuc2V0SWNvbihcImNoZWNrbWFya1wiKVxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zYXZlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBiO1xuICAgICAgICB9KTtcbiAgICAgICAgZm9vdGVyQnV0dG9ucy5hZGRFeHRyYUJ1dHRvbigoYikgPT4ge1xuICAgICAgICAgICAgYi5zZXRUb29sdGlwKFwiQ2FuY2VsXCIpXG4gICAgICAgICAgICAgICAgLnNldEljb24oXCJjcm9zc1wiKVxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zYXZlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gYjtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5jbGFzcyBEZWxldGVUZW1wbGF0ZXNNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICBwcm9jZWVkOiBib29sZWFuID0gZmFsc2U7XG4gICAgdGVtcGxhdGVUaXRsZTogc3RyaW5nO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHRlbXBsYXRlVGl0bGU6IHN0cmluZykge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgICAgICB0aGlzLnRlbXBsYXRlVGl0bGUgPSB0ZW1wbGF0ZVRpdGxlO1xuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG5cbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDMnLCB7dGV4dDogYEFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgJyR7dGhpcy50ZW1wbGF0ZVRpdGxlfSc/YH0pO1xuXG4gICAgICAgIGxldCBmb290ZXJFbCA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoKTtcbiAgICAgICAgbGV0IGZvb3RlckJ1dHRvbnMgPSBuZXcgU2V0dGluZyhmb290ZXJFbCk7XG4gICAgICAgIGZvb3RlckJ1dHRvbnMuYWRkQnV0dG9uKChiKSA9PiB7XG4gICAgICAgICAgICBiLnNldFRvb2x0aXAoXCJZZXNcIilcbiAgICAgICAgICAgICAgICAuc2V0SWNvbihcImNoZWNrbWFya1wiKVxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZWVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGI7XG4gICAgICAgIH0pO1xuICAgICAgICBmb290ZXJCdXR0b25zLmFkZEV4dHJhQnV0dG9uKChiKSA9PiB7XG4gICAgICAgICAgICBiLnNldFRvb2x0aXAoXCJDYW5jZWxcIilcbiAgICAgICAgICAgICAgICAuc2V0SWNvbihcImNyb3NzXCIpXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2NlZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGI7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiIsICJleHBvcnQgZnVuY3Rpb24gZm9ybWF0VG9SZWdleChzdHI6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHN0clxuICAgICAgICAucmVwbGFjZSgvXFxzL2csICdcXFxccycpXG4gICAgICAgIC5yZXBsYWNlKC9cXC4vZywgJ1xcXFwuJylcbiAgICAgICAgLnJlcGxhY2UoL1xcKC9nLCAnXFxcXCgnKVxuICAgICAgICAucmVwbGFjZSgvXFwpL2csICdcXFxcKScpXG4gICAgICAgIC5yZXBsYWNlKC9cXHsvZywgJ1xcXFx7JylcbiAgICAgICAgLnJlcGxhY2UoL1xcfS9nLCAnXFxcXH0nKVxuICAgICAgICAucmVwbGFjZSgvXFxbL2csICdcXFxcWycpXG4gICAgICAgIC5yZXBsYWNlKC9cXF0vZywgJ1xcXFxdJyk7XG59XG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSx1QkFBaUQ7OztBQ0FqRCxzQkFBMkY7QUFFcEYsSUFBTSxzQkFBTixjQUFrQyxpQ0FBaUI7QUFBQSxFQUd0RCxZQUFZLEtBQVUsUUFBbUI7QUFDckMsVUFBTSxLQUFLLE1BQU07QUFDakIsU0FBSyxTQUFTO0FBQUEsRUFDbEI7QUFBQSxFQUVBLEFBQU0sVUFBZ0I7QUFBQTtBQUNsQixZQUFNLEVBQUUsZ0JBQWdCO0FBRXhCLGtCQUFZLE1BQU07QUFDbEIsa0JBQVksU0FBUyxNQUFNLEVBQUMsTUFBTSxxQkFBb0IsQ0FBQztBQUV2RCxVQUFJLHdCQUFRLFdBQVcsRUFDbEIsUUFBUSxvQkFBb0IsRUFDNUIsUUFDRyxlQUFlLENBQUMsTUFBTTtBQUNsQixVQUFFLFdBQVc7QUFBQSxVQUNULE1BQU07QUFBQSxRQUNWLENBQUM7QUFDRCxVQUFFLFNBQVMsUUFBUTtBQUFBLFVBQ2YsTUFBTTtBQUFBLFFBQ1YsQ0FBQztBQUNELFVBQUUsV0FBVztBQUFBLFVBQ1QsTUFBTTtBQUFBLFFBQ1YsQ0FBQztBQUFBLE1BQ0wsQ0FBQyxD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
